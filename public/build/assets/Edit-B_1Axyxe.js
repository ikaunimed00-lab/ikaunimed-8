import{c as $e,r as We,b as Xe,s as Ae,j as t,H as qe,L as Te}from"./app-DzxT-LV2.js";import{E as Qe}from"./Editor-DLDmRjdN.js";import{A as Ve}from"./AdminLayout-DFOFP5g8.js";import{X as Je}from"./x-C5DDBzMT.js";import{S as Ye}from"./save-DAh5G2Z5.js";/* empty css            */import"./index-CJisBzhq.js";import"./sidebar-menu-config-CMS8IJ4Y.js";import"./house-Bbv5DX90.js";import"./createLucideIcon-DpgQ8Wl-.js";import"./users-Beh84tXt.js";import"./newspaper-CNDYpSH0.js";import"./building-2-Djzrt_NS.js";import"./graduation-cap-CAscF7VP.js";import"./handshake-CMR_WoSg.js";import"./user-ZjZFJxzU.js";import"./menu-CqQKRY6T.js";function Nt(r){const e=$e.c(149),{news:i,authors:ye,categories:_e,organizations:J,authRole:we}=r,[U,He]=We.useState(i.image??null),ke=i.excerpt||"",Se=i.user_id||"";let $;e[0]!==i.categories?($=i.categories?.map(st)||[],e[0]=i.categories,e[1]=$):$=e[1];const Pe=$,Ce=i.status||"draft",Ee=i.published_at||"";let W;e[2]!==i.content||e[3]!==i.title||e[4]!==ke||e[5]!==Se||e[6]!==Pe||e[7]!==Ce||e[8]!==Ee?(W={title:i.title,excerpt:ke,content:i.content,image:null,user_id:Se,categories:Pe,status:Ce,published_at:Ee},e[2]=i.content,e[3]=i.title,e[4]=ke,e[5]=Se,e[6]=Pe,e[7]=Ce,e[8]=Ee,e[9]=W):W=e[9];const{data:s,setData:l,put:ze,processing:X,errors:n}=Xe(W);let q;e[10]!==i.slug||e[11]!==ze?(q=function(o){o.preventDefault(),ze(Ae("admin.news.update",i.slug),{forceFormData:!0})},e[10]=i.slug,e[11]=ze,e[12]=q):q=e[12];const Be=q;let Q;e[13]!==l?(Q=function(o){const T=o.target.files?.[0];if(T){l("image",T);const Oe=new FileReader;Oe.onloadend=()=>{He(Oe.result)},Oe.readAsDataURL(T)}},e[13]=l,e[14]=Q):Q=e[14];const De=Q;let V;e[15]!==s.categories||e[16]!==l?(V=function(o){l("categories",s.categories.includes(o)?s.categories.filter(T=>T!==o):[...s.categories,o])},e[15]=s.categories,e[16]=l,e[17]=V):V=e[17];const H=V,Re=s.status==="published";let Y;e[18]!==n?(Y=Object.keys(n),e[18]=n,e[19]=Y):Y=e[19];const Fe=Y.length>0;let Z;e[20]===Symbol.for("react.memo_cache_sentinel")?(Z={draft:"bg-slate-100 text-slate-700",scheduled:"bg-amber-100 text-amber-700",published:"bg-green-100 text-green-700"},e[20]=Z):Z=e[20];const Ue=Z;let ee;e[21]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(qe,{title:"Edit Berita"}),e[21]=ee):ee=e[21];let te;e[22]===Symbol.for("react.memo_cache_sentinel")?(te=Ae("admin.news.index"),e[22]=te):te=e[22];let se;e[23]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs(Te,{href:te,className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-4 font-semibold transition",children:[t.jsx(Je,{className:"h-4 w-4"}),"Kembali"]}),e[23]=se):se=e[23];let le;e[24]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-extrabold text-slate-900",children:"‚úèÔ∏è Edit Berita"}),t.jsx("p",{className:"text-slate-600 mt-2",children:"Perbarui konten dan kelola publikasi"})]}),e[24]=le):le=e[24];const Ke=`px-4 py-2 rounded-lg font-semibold ${Ue[s.status]}`,Ge=s.status==="draft"&&"üìã Draft",Le=s.status==="scheduled"&&"‚è∞ Terjadwal",Ie=s.status==="published"&&"üöÄ Published";let c;e[25]!==Ke||e[26]!==Ge||e[27]!==Le||e[28]!==Ie?(c=t.jsxs("div",{className:"mb-8",children:[se,t.jsxs("div",{className:"flex items-center justify-between",children:[le,t.jsxs("div",{className:Ke,children:[Ge,Le,Ie]})]})]}),e[25]=Ke,e[26]=Ge,e[27]=Le,e[28]=Ie,e[29]=c):c=e[29];let d;e[30]!==n||e[31]!==Fe?(d=Fe&&t.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-lg p-4",children:[t.jsx("p",{className:"text-red-800 font-semibold mb-2",children:"‚ö†Ô∏è Perbaiki error berikut:"}),t.jsx("ul",{className:"text-red-700 text-sm space-y-1",children:Object.entries(n).map(tt)})]}),e[30]=n,e[31]=Fe,e[32]=d):d=e[32];let m;e[33]!==s.organization_id||e[34]!==n||e[35]!==J||e[36]!==l?(m=J&&J.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[t.jsx("label",{className:"block font-semibold text-slate-900",children:"üè¢ Scope Organisasi"}),t.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Pilih organisasi pemilik berita ini. Kosongkan untuk berita Global/Publik."}),t.jsxs("select",{value:s.organization_id,onChange:a=>l("organization_id",a.target.value),className:"w-full rounded-lg border border-slate-200 px-4 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",children:[t.jsx("option",{value:"",children:"-- Global / Publik (PP) --"}),J.map(et)]}),n.organization_id&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.organization_id})]}),e[33]=s.organization_id,e[34]=n,e[35]=J,e[36]=l,e[37]=m):m=e[37];let ae;e[38]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("label",{className:"block font-semibold text-slate-900",children:"‚úçÔ∏è Judul Berita"}),e[38]=ae):ae=e[38];let u;e[39]!==l?(u=a=>l("title",a.target.value),e[39]=l,e[40]=u):u=e[40];let b;e[41]!==s.title||e[42]!==u?(b=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[ae,t.jsx("input",{value:s.title,onChange:u,className:"w-full border border-slate-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e[41]=s.title,e[42]=u,e[43]=b):b=e[43];let ie;e[44]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üìå Ringkasan (Lead)"}),e[44]=ie):ie=e[44];let h;e[45]!==l?(h=a=>l("excerpt",a.target.value),e[45]=l,e[46]=h):h=e[46];let x;e[47]!==s.excerpt||e[48]!==h?(x=t.jsx("textarea",{value:s.excerpt,onChange:h,placeholder:"Ringkasan singkat berita yang menarik.",rows:3,className:"w-full border border-slate-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),e[47]=s.excerpt,e[48]=h,e[49]=x):x=e[49];let re;e[50]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("p",{className:"text-xs text-slate-500",children:"20-500 karakter"}),e[50]=re):re=e[50];let f;e[51]!==x?(f=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[ie,x,re]}),e[51]=x,e[52]=f):f=e[52];let oe;e[53]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üñºÔ∏è Gambar Featured"}),e[53]=oe):oe=e[53];let p;e[54]!==U||e[55]!==l?(p=U&&t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:U,alt:"Preview",className:"w-full rounded-lg border-2 border-blue-200 max-h-64 object-cover"}),t.jsx("button",{type:"button",onClick:()=>{l("image",null),He(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition",children:t.jsx(Je,{className:"h-4 w-4"})})]}),e[54]=U,e[55]=l,e[56]=p):p=e[56];let g;e[57]!==De?(g=t.jsx("input",{type:"file",accept:"image/*",onChange:De,className:"hidden",id:"image-upload"}),e[57]=De,e[58]=g):g=e[58];let ne;e[59]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer block",children:[t.jsx("p",{className:"text-slate-600 font-medium",children:"Klik atau drag gambar baru di sini"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Format: JPG, PNG ‚Ä¢ Min: 600x400px ‚Ä¢ Max: 5MB"})]}),e[59]=ne):ne=e[59];let j;e[60]!==g?(j=t.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-500 transition cursor-pointer",children:[g,ne]}),e[60]=g,e[61]=j):j=e[61];let N;e[62]!==p||e[63]!==j?(N=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[oe,p,j]}),e[62]=p,e[63]=j,e[64]=N):N=e[64];let ce;e[65]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üìÑ Konten Berita"}),e[65]=ce):ce=e[65];let v;e[66]!==l?(v=a=>l("content",a),e[66]=l,e[67]=v):v=e[67];let y;e[68]!==s.content||e[69]!==v?(y=t.jsx(Qe,{value:s.content,onChange:v}),e[68]=s.content,e[69]=v,e[70]=y):y=e[70];let de;e[71]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("p",{className:"text-xs text-slate-500",children:"100-50,000 karakter"}),e[71]=de):de=e[71];let _;e[72]!==y?(_=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[ce,y,de]}),e[72]=y,e[73]=_):_=e[73];let w;e[74]!==m||e[75]!==b||e[76]!==f||e[77]!==N||e[78]!==_?(w=t.jsxs("div",{className:"col-span-2 space-y-6",children:[m,b,f,N,_]}),e[74]=m,e[75]=b,e[76]=f,e[77]=N,e[78]=_,e[79]=w):w=e[79];let k;e[80]!==we||e[81]!==ye||e[82]!==s.user_id||e[83]!==l?(k=we==="admin"&&t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[t.jsx("h3",{className:"font-semibold text-slate-900",children:"üë§ Penulis"}),t.jsxs("select",{value:s.user_id,onChange:a=>l("user_id",a.target.value),className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Pilih Penulis"}),ye.map(Ze)]})]}),e[80]=we,e[81]=ye,e[82]=s.user_id,e[83]=l,e[84]=k):k=e[84];let me;e[85]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("h3",{className:"font-semibold text-slate-900",children:"üè∑Ô∏è Kategori"}),e[85]=me):me=e[85];let S;if(e[86]!==_e||e[87]!==s.categories||e[88]!==H){let a;e[90]!==s.categories||e[91]!==H?(a=o=>t.jsxs("label",{className:"flex items-center p-3 border border-slate-200 rounded-lg hover:bg-blue-50 cursor-pointer transition",children:[t.jsx("input",{type:"checkbox",checked:s.categories.includes(o.id),onChange:()=>H(o.id),className:"rounded w-4 h-4 text-blue-600"}),t.jsx("span",{className:"ml-3 font-medium text-slate-700",children:o.name})]},o.id),e[90]=s.categories,e[91]=H,e[92]=a):a=e[92],S=_e.map(a),e[86]=_e,e[87]=s.categories,e[88]=H,e[89]=S}else S=e[89];let P;e[93]!==S?(P=t.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:S}),e[93]=S,e[94]=P):P=e[94];let ue;e[95]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("p",{className:"text-xs text-slate-500",children:"Pilih 1-3 kategori yang relevan"}),e[95]=ue):ue=e[95];let C;e[96]!==P?(C=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[me,P,ue]}),e[96]=P,e[97]=C):C=e[97];let be;e[98]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx("h3",{className:"font-semibold text-slate-900",children:"‚öôÔ∏è Status Publikasi"}),e[98]=be):be=e[98];let he;e[99]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Status"}),e[99]=he):he=e[99];let E;e[100]!==l?(E=a=>l("status",a.target.value),e[100]=l,e[101]=E):E=e[101];let xe,fe,pe;e[102]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("option",{value:"draft",children:"üìã Draft"}),fe=t.jsx("option",{value:"scheduled",children:"‚è∞ Jadwalkan"}),pe=t.jsx("option",{value:"published",children:"üöÄ Publish"}),e[102]=xe,e[103]=fe,e[104]=pe):(xe=e[102],fe=e[103],pe=e[104]);let z;e[105]!==s.status||e[106]!==E?(z=t.jsxs("div",{className:"space-y-2",children:[he,t.jsxs("select",{value:s.status,onChange:E,className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[xe,fe,pe]})]}),e[105]=s.status,e[106]=E,e[107]=z):z=e[107];let B;e[108]!==s.published_at||e[109]!==Re||e[110]!==l?(B=Re&&t.jsxs("div",{className:"space-y-2 pt-3 border-t border-slate-200",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Waktu Publikasi"}),t.jsx("input",{type:"datetime-local",value:s.published_at,onChange:a=>l("published_at",a.target.value),className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Kosongi untuk publish sekarang"})]}),e[108]=s.published_at,e[109]=Re,e[110]=l,e[111]=B):B=e[111];let D;e[112]!==s.status?(D=s.status==="draft"&&t.jsxs("p",{className:"text-blue-800",children:[t.jsx("span",{className:"font-semibold",children:"üìã Draft:"})," Berita disimpan tapi belum dipublikasikan"]}),e[112]=s.status,e[113]=D):D=e[113];let R;e[114]!==s.status?(R=s.status==="scheduled"&&t.jsxs("p",{className:"text-blue-800",children:[t.jsx("span",{className:"font-semibold",children:"‚è∞ Terjadwal:"})," Otomatis publish pada waktu ditentukan"]}),e[114]=s.status,e[115]=R):R=e[115];let F;e[116]!==s.status?(F=s.status==="published"&&t.jsxs("p",{className:"text-blue-800",children:[t.jsx("span",{className:"font-semibold",children:"üöÄ Published:"})," Berita terlihat di portal"]}),e[116]=s.status,e[117]=F):F=e[117];let K;e[118]!==D||e[119]!==R||e[120]!==F?(K=t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:[D,R,F]}),e[118]=D,e[119]=R,e[120]=F,e[121]=K):K=e[121];let G;e[122]!==z||e[123]!==B||e[124]!==K?(G=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[be,z,B,K]}),e[122]=z,e[123]=B,e[124]=K,e[125]=G):G=e[125];let ge;e[126]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(Ye,{className:"h-5 w-5"}),e[126]=ge):ge=e[126];const Me=X?"‚è≥ Memproses...":s.status==="draft"?"üíæ Simpan Draft":"üöÄ Publish Sekarang";let L;e[127]!==X||e[128]!==Me?(L=t.jsxs("button",{disabled:X,type:"submit",className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-6 py-3.5 rounded-lg font-bold hover:from-emerald-600 hover:to-teal-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:[ge,Me]}),e[127]=X,e[128]=Me,e[129]=L):L=e[129];let je;e[130]===Symbol.for("react.memo_cache_sentinel")?(je=Ae("admin.news.index"),e[130]=je):je=e[130];let Ne;e[131]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsxs(Te,{href:je,className:"w-full flex items-center justify-center gap-2 px-6 py-3 border-2 border-slate-300 text-slate-700 rounded-lg font-semibold hover:bg-slate-100 hover:border-slate-400 transition-all active:scale-95",children:[t.jsx(Je,{className:"h-5 w-5"}),"Batal"]}),e[131]=Ne):Ne=e[131];let I;e[132]!==L?(I=t.jsxs("div",{className:"space-y-3 sticky bottom-4 bg-white/95 backdrop-blur rounded-xl p-4 border border-slate-200 shadow-lg",children:[L,Ne]}),e[132]=L,e[133]=I):I=e[133];let M;e[134]!==k||e[135]!==C||e[136]!==G||e[137]!==I?(M=t.jsxs("div",{className:"col-span-1 space-y-4",children:[k,C,G,I]}),e[134]=k,e[135]=C,e[136]=G,e[137]=I,e[138]=M):M=e[138];let O;e[139]!==w||e[140]!==M?(O=t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[w,M]}),e[139]=w,e[140]=M,e[141]=O):O=e[141];let A;e[142]!==Be||e[143]!==d||e[144]!==O?(A=t.jsxs("form",{onSubmit:Be,className:"space-y-6",children:[d,O]}),e[142]=Be,e[143]=d,e[144]=O,e[145]=A):A=e[145];let ve;return e[146]!==c||e[147]!==A?(ve=t.jsxs(Ve,{children:[ee,t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50/20 to-white py-8 px-4",children:t.jsxs("div",{className:"max-w-5xl mx-auto",children:[c,A]})})]}),e[146]=c,e[147]=A,e[148]=ve):ve=e[148],ve}function Ze(r){return t.jsxs("option",{value:r.id,children:[r.name," (",r.role,")"]},r.id)}function et(r){return t.jsxs("option",{value:r.id,children:[r.name," (",r.type.toUpperCase(),")"]},r.id)}function tt(r){const[e,i]=r;return t.jsxs("li",{children:["‚Ä¢ ",e,": ",i]},e)}function st(r){return parseInt(r)}export{Nt as default};

import{c as Qe,r as Ze,b as et,s as $e,j as t,H as tt,L as Xe}from"./app-D95FnOV6.js";import{E as st}from"./Editor-DwCTuWgZ.js";import{A as lt}from"./AdminLayout-CNKw-XCX.js";import{X as Ce}from"./x-DBfJv2zX.js";import{S as at}from"./save-CEpRHPHT.js";/* empty css            */import"./index-Ds9sODE9.js";import"./sidebar-menu-config-BtOi__yH.js";import"./menu-RxGSU8V6.js";import"./createLucideIcon-CAXT7I-o.js";import"./users-Byg6B4yv.js";import"./message-circle-pw2sqr0h.js";import"./user-CXA9MUPC.js";function Nt(o){const e=Qe.c(163),{news:i,authors:Ee,categories:ze,organizations:W,authRole:Be}=o,[Y,We]=Ze.useState(i.image??null),De=i.excerpt||"",Re=i.user_id||"";let q;e[0]!==i.categories?(q=i.categories?.map(nt)||[],e[0]=i.categories,e[1]=q):q=e[1];const Fe=q;let m;e[2]!==i.video_urls?(m=i.video_urls||[],e[2]=i.video_urls,e[3]=m):m=e[3];const Ke=i.status||"draft",Le=i.published_at||"";let Q;e[4]!==i.content||e[5]!==i.title||e[6]!==De||e[7]!==Re||e[8]!==Fe||e[9]!==m||e[10]!==Ke||e[11]!==Le?(Q={title:i.title,excerpt:De,content:i.content,image:null,user_id:Re,categories:Fe,video_urls:m,status:Ke,published_at:Le},e[4]=i.content,e[5]=i.title,e[6]=De,e[7]=Re,e[8]=Fe,e[9]=m,e[10]=Ke,e[11]=Le,e[12]=Q):Q=e[12];const{data:s,setData:l,put:Te,processing:Z,errors:n}=et(Q);let ee;e[13]!==i.slug||e[14]!==Te?(ee=function(r){r.preventDefault(),Te($e("admin.news.update",i.slug),{forceFormData:!0})},e[13]=i.slug,e[14]=Te,e[15]=ee):ee=e[15];const Ge=ee;let te;e[16]!==l?(te=function(r){const c=r.target.files?.[0];if(c){l("image",c);const d=new FileReader;d.onloadend=()=>{We(d.result)},d.readAsDataURL(c)}},e[16]=l,e[17]=te):te=e[17];const Ie=te;let se;e[18]!==s.categories||e[19]!==l?(se=function(r){l("categories",s.categories.includes(r)?s.categories.filter(c=>c!==r):[...s.categories,r])},e[18]=s.categories,e[19]=l,e[20]=se):se=e[20];const X=se,Me=s.status==="published";let le;e[21]!==n?(le=Object.keys(n),e[21]=n,e[22]=le):le=e[22];const Oe=le.length>0;let ae;e[23]===Symbol.for("react.memo_cache_sentinel")?(ae={draft:"bg-slate-100 text-slate-700",scheduled:"bg-amber-100 text-amber-700",published:"bg-green-100 text-green-700"},e[23]=ae):ae=e[23];const Ye=ae;let ie;e[24]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(tt,{title:"Edit Berita"}),e[24]=ie):ie=e[24];let re;e[25]===Symbol.for("react.memo_cache_sentinel")?(re=$e("admin.news.index"),e[25]=re):re=e[25];let oe;e[26]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsxs(Xe,{href:re,className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-4 font-semibold transition",children:[t.jsx(Ce,{className:"h-4 w-4"}),"Kembali"]}),e[26]=oe):oe=e[26];let ne;e[27]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-extrabold text-slate-900",children:"‚úèÔ∏è Edit Berita"}),t.jsx("p",{className:"text-slate-600 mt-2",children:"Perbarui konten dan kelola publikasi"})]}),e[27]=ne):ne=e[27];const Ue=`px-4 py-2 rounded-lg font-semibold ${Ye[s.status]}`,Ae=s.status==="draft"&&"üìã Draft",Je=s.status==="scheduled"&&"‚è∞ Terjadwal",He=s.status==="published"&&"üöÄ Published";let u;e[28]!==Ue||e[29]!==Ae||e[30]!==Je||e[31]!==He?(u=t.jsxs("div",{className:"mb-8",children:[oe,t.jsxs("div",{className:"flex items-center justify-between",children:[ne,t.jsxs("div",{className:Ue,children:[Ae,Je,He]})]})]}),e[28]=Ue,e[29]=Ae,e[30]=Je,e[31]=He,e[32]=u):u=e[32];let b;e[33]!==n||e[34]!==Oe?(b=Oe&&t.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-lg p-4",children:[t.jsx("p",{className:"text-red-800 font-semibold mb-2",children:"‚ö†Ô∏è Perbaiki error berikut:"}),t.jsx("ul",{className:"text-red-700 text-sm space-y-1",children:Object.entries(n).map(ot)})]}),e[33]=n,e[34]=Oe,e[35]=b):b=e[35];let h;e[36]!==s.organization_id||e[37]!==n||e[38]!==W||e[39]!==l?(h=W&&W.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[t.jsx("label",{className:"block font-semibold text-slate-900",children:"üè¢ Scope Organisasi"}),t.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Pilih organisasi pemilik berita ini. Kosongkan untuk berita Global/Publik."}),t.jsxs("select",{value:s.organization_id,onChange:a=>l("organization_id",a.target.value),className:"w-full rounded-lg border border-slate-200 px-4 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",children:[t.jsx("option",{value:"",children:"-- Global / Publik (PP) --"}),W.map(rt)]}),n.organization_id&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.organization_id})]}),e[36]=s.organization_id,e[37]=n,e[38]=W,e[39]=l,e[40]=h):h=e[40];let ce;e[41]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("label",{className:"block font-semibold text-slate-900",children:"‚úçÔ∏è Judul Berita"}),e[41]=ce):ce=e[41];let x;e[42]!==l?(x=a=>l("title",a.target.value),e[42]=l,e[43]=x):x=e[43];let f;e[44]!==s.title||e[45]!==x?(f=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[ce,t.jsx("input",{value:s.title,onChange:x,className:"w-full border border-slate-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e[44]=s.title,e[45]=x,e[46]=f):f=e[46];let de;e[47]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üìå Ringkasan (Lead)"}),e[47]=de):de=e[47];let p;e[48]!==l?(p=a=>l("excerpt",a.target.value),e[48]=l,e[49]=p):p=e[49];let g;e[50]!==s.excerpt||e[51]!==p?(g=t.jsx("textarea",{value:s.excerpt,onChange:p,placeholder:"Ringkasan singkat berita yang menarik.",rows:3,className:"w-full border border-slate-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),e[50]=s.excerpt,e[51]=p,e[52]=g):g=e[52];let me;e[53]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("p",{className:"text-xs text-slate-500",children:"20-500 karakter"}),e[53]=me):me=e[53];let j;e[54]!==g?(j=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[de,g,me]}),e[54]=g,e[55]=j):j=e[55];let ue;e[56]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üé• Video (YouTube / TikTok)"}),e[56]=ue):ue=e[56];let v;e[57]!==s.video_urls||e[58]!==l?(v=s.video_urls.map((a,r)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:a,onChange:c=>{const d=[...s.video_urls];d[r]=c.target.value,l("video_urls",d)},placeholder:"https://www.youtube.com/watch?v=...",className:"flex-1 border border-slate-200 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("button",{type:"button",onClick:()=>{const c=s.video_urls.filter((d,qe)=>qe!==r);l("video_urls",c)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:t.jsx(Ce,{className:"h-5 w-5"})})]},r)),e[57]=s.video_urls,e[58]=l,e[59]=v):v=e[59];let _;e[60]!==s.video_urls||e[61]!==l?(_=t.jsx("button",{type:"button",onClick:()=>l("video_urls",[...s.video_urls,""]),className:"text-sm text-blue-600 font-semibold hover:text-blue-700 flex items-center gap-1",children:"+ Tambah Link Video"}),e[60]=s.video_urls,e[61]=l,e[62]=_):_=e[62];let N;e[63]!==v||e[64]!==_?(N=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[ue,t.jsxs("div",{className:"space-y-3",children:[v,_]})]}),e[63]=v,e[64]=_,e[65]=N):N=e[65];let be;e[66]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üñºÔ∏è Gambar Featured"}),e[66]=be):be=e[66];let y;e[67]!==Y||e[68]!==l?(y=Y&&t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:Y,alt:"Preview",className:"w-full rounded-lg border-2 border-blue-200 max-h-64 object-cover"}),t.jsx("button",{type:"button",onClick:()=>{l("image",null),We(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition",children:t.jsx(Ce,{className:"h-4 w-4"})})]}),e[67]=Y,e[68]=l,e[69]=y):y=e[69];let w;e[70]!==Ie?(w=t.jsx("input",{type:"file",accept:"image/*",onChange:Ie,className:"hidden",id:"image-upload"}),e[70]=Ie,e[71]=w):w=e[71];let he;e[72]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer block",children:[t.jsx("p",{className:"text-slate-600 font-medium",children:"Klik atau drag gambar baru di sini"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Format: JPG, PNG ‚Ä¢ Min: 600x400px ‚Ä¢ Max: 5MB"})]}),e[72]=he):he=e[72];let k;e[73]!==w?(k=t.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-500 transition cursor-pointer",children:[w,he]}),e[73]=w,e[74]=k):k=e[74];let S;e[75]!==y||e[76]!==k?(S=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[be,y,k]}),e[75]=y,e[76]=k,e[77]=S):S=e[77];let xe;e[78]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üìÑ Konten Berita"}),e[78]=xe):xe=e[78];let P;e[79]!==l?(P=a=>l("content",a),e[79]=l,e[80]=P):P=e[80];let C;e[81]!==s.content||e[82]!==P?(C=t.jsx(st,{value:s.content,onChange:P}),e[81]=s.content,e[82]=P,e[83]=C):C=e[83];let fe;e[84]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("p",{className:"text-xs text-slate-500",children:"100-50,000 karakter"}),e[84]=fe):fe=e[84];let E;e[85]!==C?(E=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[xe,C,fe]}),e[85]=C,e[86]=E):E=e[86];let z;e[87]!==h||e[88]!==f||e[89]!==j||e[90]!==N||e[91]!==S||e[92]!==E?(z=t.jsxs("div",{className:"col-span-2 space-y-6",children:[h,f,j,N,S,E]}),e[87]=h,e[88]=f,e[89]=j,e[90]=N,e[91]=S,e[92]=E,e[93]=z):z=e[93];let B;e[94]!==Be||e[95]!==Ee||e[96]!==s.user_id||e[97]!==l?(B=Be==="admin"&&t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[t.jsx("h3",{className:"font-semibold text-slate-900",children:"üë§ Penulis"}),t.jsxs("select",{value:s.user_id,onChange:a=>l("user_id",a.target.value),className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Pilih Penulis"}),Ee.map(it)]})]}),e[94]=Be,e[95]=Ee,e[96]=s.user_id,e[97]=l,e[98]=B):B=e[98];let pe;e[99]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx("h3",{className:"font-semibold text-slate-900",children:"üè∑Ô∏è Kategori"}),e[99]=pe):pe=e[99];let D;if(e[100]!==ze||e[101]!==s.categories||e[102]!==X){let a;e[104]!==s.categories||e[105]!==X?(a=r=>t.jsxs("label",{className:"flex items-center p-3 border border-slate-200 rounded-lg hover:bg-blue-50 cursor-pointer transition",children:[t.jsx("input",{type:"checkbox",checked:s.categories.includes(r.id),onChange:()=>X(r.id),className:"rounded w-4 h-4 text-blue-600"}),t.jsx("span",{className:"ml-3 font-medium text-slate-700",children:r.name})]},r.id),e[104]=s.categories,e[105]=X,e[106]=a):a=e[106],D=ze.map(a),e[100]=ze,e[101]=s.categories,e[102]=X,e[103]=D}else D=e[103];let R;e[107]!==D?(R=t.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:D}),e[107]=D,e[108]=R):R=e[108];let ge;e[109]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("p",{className:"text-xs text-slate-500",children:"Pilih 1-3 kategori yang relevan"}),e[109]=ge):ge=e[109];let F;e[110]!==R?(F=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[pe,R,ge]}),e[110]=R,e[111]=F):F=e[111];let je;e[112]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("h3",{className:"font-semibold text-slate-900",children:"‚öôÔ∏è Status Publikasi"}),e[112]=je):je=e[112];let ve;e[113]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Status"}),e[113]=ve):ve=e[113];let K;e[114]!==l?(K=a=>l("status",a.target.value),e[114]=l,e[115]=K):K=e[115];let _e,Ne,ye;e[116]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("option",{value:"draft",children:"üìã Draft"}),Ne=t.jsx("option",{value:"scheduled",children:"‚è∞ Jadwalkan"}),ye=t.jsx("option",{value:"published",children:"üöÄ Publish"}),e[116]=_e,e[117]=Ne,e[118]=ye):(_e=e[116],Ne=e[117],ye=e[118]);let L;e[119]!==s.status||e[120]!==K?(L=t.jsxs("div",{className:"space-y-2",children:[ve,t.jsxs("select",{value:s.status,onChange:K,className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[_e,Ne,ye]})]}),e[119]=s.status,e[120]=K,e[121]=L):L=e[121];let T;e[122]!==s.published_at||e[123]!==Me||e[124]!==l?(T=Me&&t.jsxs("div",{className:"space-y-2 pt-3 border-t border-slate-200",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Waktu Publikasi"}),t.jsx("input",{type:"datetime-local",value:s.published_at,onChange:a=>l("published_at",a.target.value),className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Kosongi untuk publish sekarang"})]}),e[122]=s.published_at,e[123]=Me,e[124]=l,e[125]=T):T=e[125];let G;e[126]!==s.status?(G=s.status==="draft"&&t.jsxs("p",{className:"text-blue-800",children:[t.jsx("span",{className:"font-semibold",children:"üìã Draft:"})," Berita disimpan tapi belum dipublikasikan"]}),e[126]=s.status,e[127]=G):G=e[127];let I;e[128]!==s.status?(I=s.status==="scheduled"&&t.jsxs("p",{className:"text-blue-800",children:[t.jsx("span",{className:"font-semibold",children:"‚è∞ Terjadwal:"})," Otomatis publish pada waktu ditentukan"]}),e[128]=s.status,e[129]=I):I=e[129];let M;e[130]!==s.status?(M=s.status==="published"&&t.jsxs("p",{className:"text-blue-800",children:[t.jsx("span",{className:"font-semibold",children:"üöÄ Published:"})," Berita terlihat di portal"]}),e[130]=s.status,e[131]=M):M=e[131];let O;e[132]!==G||e[133]!==I||e[134]!==M?(O=t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:[G,I,M]}),e[132]=G,e[133]=I,e[134]=M,e[135]=O):O=e[135];let U;e[136]!==L||e[137]!==T||e[138]!==O?(U=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[je,L,T,O]}),e[136]=L,e[137]=T,e[138]=O,e[139]=U):U=e[139];let we;e[140]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(at,{className:"h-5 w-5"}),e[140]=we):we=e[140];const Ve=Z?"‚è≥ Memproses...":s.status==="draft"?"üíæ Simpan Draft":"üöÄ Publish Sekarang";let A;e[141]!==Z||e[142]!==Ve?(A=t.jsxs("button",{disabled:Z,type:"submit",className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-6 py-3.5 rounded-lg font-bold hover:from-emerald-600 hover:to-teal-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:[we,Ve]}),e[141]=Z,e[142]=Ve,e[143]=A):A=e[143];let ke;e[144]===Symbol.for("react.memo_cache_sentinel")?(ke=$e("admin.news.index"),e[144]=ke):ke=e[144];let Se;e[145]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsxs(Xe,{href:ke,className:"w-full flex items-center justify-center gap-2 px-6 py-3 border-2 border-slate-300 text-slate-700 rounded-lg font-semibold hover:bg-slate-100 hover:border-slate-400 transition-all active:scale-95",children:[t.jsx(Ce,{className:"h-5 w-5"}),"Batal"]}),e[145]=Se):Se=e[145];let J;e[146]!==A?(J=t.jsxs("div",{className:"space-y-3 sticky bottom-4 bg-white/95 backdrop-blur rounded-xl p-4 border border-slate-200 shadow-lg",children:[A,Se]}),e[146]=A,e[147]=J):J=e[147];let H;e[148]!==B||e[149]!==F||e[150]!==U||e[151]!==J?(H=t.jsxs("div",{className:"col-span-1 space-y-4",children:[B,F,U,J]}),e[148]=B,e[149]=F,e[150]=U,e[151]=J,e[152]=H):H=e[152];let V;e[153]!==z||e[154]!==H?(V=t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[z,H]}),e[153]=z,e[154]=H,e[155]=V):V=e[155];let $;e[156]!==Ge||e[157]!==b||e[158]!==V?($=t.jsxs("form",{onSubmit:Ge,className:"space-y-6",children:[b,V]}),e[156]=Ge,e[157]=b,e[158]=V,e[159]=$):$=e[159];let Pe;return e[160]!==u||e[161]!==$?(Pe=t.jsxs(lt,{children:[ie,t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50/20 to-white py-8 px-4",children:t.jsxs("div",{className:"max-w-5xl mx-auto",children:[u,$]})})]}),e[160]=u,e[161]=$,e[162]=Pe):Pe=e[162],Pe}function it(o){return t.jsxs("option",{value:o.id,children:[o.name," (",o.role,")"]},o.id)}function rt(o){return t.jsxs("option",{value:o.id,children:[o.name," (",o.type.toUpperCase(),")"]},o.id)}function ot(o){const[e,i]=o;return t.jsxs("li",{children:["‚Ä¢ ",e,": ",i]},e)}function nt(o){return parseInt(o)}export{Nt as default};

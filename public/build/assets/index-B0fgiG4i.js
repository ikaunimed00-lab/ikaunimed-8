import{r as n,j as g,t as _}from"./app-DzxT-LV2.js";import{b as h,u as U}from"./index-C-UF9NqB.js";import{P as R,d as j}from"./index-BEuY00AT.js";import{u as x}from"./button-COFTxZBz.js";function m(t){const e=n.useRef(t);return n.useEffect(()=>{e.current=t}),n.useMemo(()=>(...s)=>e.current?.(...s),[])}function z(t,e=globalThis?.document){const s=m(t);n.useEffect(()=>{const r=i=>{i.key==="Escape"&&s(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[s,e])}var H="DismissableLayer",p="dismissableLayer.update",K="dismissableLayer.pointerDownOutside",M="dismissableLayer.focusOutside",C,I=n.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),X=n.forwardRef((t,e)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:u,onInteractOutside:f,onDismiss:d,...E}=t,a=n.useContext(I),[c,S]=n.useState(null),l=c?.ownerDocument??globalThis?.document,[,B]=n.useState({}),F=x(e,o=>S(o)),b=Array.from(a.layers),[W]=[...a.layersWithOutsidePointerEventsDisabled].slice(-1),k=b.indexOf(W),D=c?b.indexOf(c):-1,A=a.layersWithOutsidePointerEventsDisabled.size>0,P=D>=k,N=q(o=>{const v=o.target,L=[...a.branches].some(y=>y.contains(v));!P||L||(i?.(o),f?.(o),o.defaultPrevented||d?.())},l),O=G(o=>{const v=o.target;[...a.branches].some(y=>y.contains(v))||(u?.(o),f?.(o),o.defaultPrevented||d?.())},l);return z(o=>{D===a.layers.size-1&&(r?.(o),!o.defaultPrevented&&d&&(o.preventDefault(),d()))},l),n.useEffect(()=>{if(c)return s&&(a.layersWithOutsidePointerEventsDisabled.size===0&&(C=l.body.style.pointerEvents,l.body.style.pointerEvents="none"),a.layersWithOutsidePointerEventsDisabled.add(c)),a.layers.add(c),w(),()=>{s&&a.layersWithOutsidePointerEventsDisabled.size===1&&(l.body.style.pointerEvents=C)}},[c,l,s,a]),n.useEffect(()=>()=>{c&&(a.layers.delete(c),a.layersWithOutsidePointerEventsDisabled.delete(c),w())},[c,a]),n.useEffect(()=>{const o=()=>B({});return document.addEventListener(p,o),()=>document.removeEventListener(p,o)},[]),g.jsx(R.div,{...E,ref:F,style:{pointerEvents:A?P?"auto":"none":void 0,...t.style},onFocusCapture:h(t.onFocusCapture,O.onFocusCapture),onBlurCapture:h(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:h(t.onPointerDownCapture,N.onPointerDownCapture)})});X.displayName=H;var Y="DismissableLayerBranch",$=n.forwardRef((t,e)=>{const s=n.useContext(I),r=n.useRef(null),i=x(e,r);return n.useEffect(()=>{const u=r.current;if(u)return s.branches.add(u),()=>{s.branches.delete(u)}},[s.branches]),g.jsx(R.div,{...t,ref:i})});$.displayName=Y;function q(t,e=globalThis?.document){const s=m(t),r=n.useRef(!1),i=n.useRef(()=>{});return n.useEffect(()=>{const u=d=>{if(d.target&&!r.current){let E=function(){T(K,s,a,{discrete:!0})};const a={originalEvent:d};d.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=E,e.addEventListener("click",i.current,{once:!0})):E()}else e.removeEventListener("click",i.current);r.current=!1},f=window.setTimeout(()=>{e.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(f),e.removeEventListener("pointerdown",u),e.removeEventListener("click",i.current)}},[e,s]),{onPointerDownCapture:()=>r.current=!0}}function G(t,e=globalThis?.document){const s=m(t),r=n.useRef(!1);return n.useEffect(()=>{const i=u=>{u.target&&!r.current&&T(M,s,{originalEvent:u},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function w(){const t=new CustomEvent(p);document.dispatchEvent(t)}function T(t,e,s,{discrete:r}){const i=s.originalEvent.target,u=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});e&&i.addEventListener(t,e,{once:!0}),r?j(i,u):i.dispatchEvent(u)}var J=_[" useId ".trim().toString()]||(()=>{}),Q=0;function se(t){const[e,s]=n.useState(J());return U(()=>{s(r=>r??String(Q++))},[t]),t||(e?`radix-${e}`:"")}export{X as D,se as a,m as u};

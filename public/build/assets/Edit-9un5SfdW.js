import{c as Ue,r as $e,b as We,s as Oe,j as t,H as Xe,L as He}from"./app-DmjASEbZ.js";import{E as qe}from"./Editor-CKB85Uez.js";import{A as Qe}from"./AdminLayout-D85hEwHo.js";import{X as Ae}from"./x-Brz5l97a.js";import{S as Ve}from"./save-CVee1pqS.js";/* empty css            */import"./index-DDZh-H31.js";import"./sidebar-menu-config-DFvUvnDA.js";import"./house-DOu_oB7y.js";import"./createLucideIcon-c1scGzLJ.js";import"./users-0fPpWC3U.js";import"./newspaper-sOeNpGKY.js";import"./building-2-iR6uumNO.js";import"./graduation-cap-B1vI_VY-.js";import"./handshake-Bknx9zdw.js";import"./user-CaeYczPT.js";import"./menu-CTIQrmq8.js";function jt(r){const e=Ue.c(148),{news:i,authors:ve,categories:ye,authRole:_e}=r,[T,Je]=$e.useState(i.image??null),we=i.excerpt||"",ke=i.user_id||"";let U;e[0]!==i.categories?(U=i.categories?.map(tt)||[],e[0]=i.categories,e[1]=U):U=e[1];const Se=U,Pe=i.status||"draft",Ce=i.published_at||"";let $;e[2]!==i.content||e[3]!==i.title||e[4]!==we||e[5]!==ke||e[6]!==Se||e[7]!==Pe||e[8]!==Ce?($={title:i.title,excerpt:we,content:i.content,image:null,user_id:ke,categories:Se,status:Pe,published_at:Ce},e[2]=i.content,e[3]=i.title,e[4]=we,e[5]=ke,e[6]=Se,e[7]=Pe,e[8]=Ce,e[9]=$):$=e[9];const{data:s,setData:l,put:ze,processing:W,errors:n}=We($);let X;e[10]!==i.slug||e[11]!==ze?(X=function(o){o.preventDefault(),ze(Oe("admin.news.update",i.slug),{forceFormData:!0})},e[10]=i.slug,e[11]=ze,e[12]=X):X=e[12];const Ee=X;let q;e[13]!==l?(q=function(o){const H=o.target.files?.[0];if(H){l("image",H);const Me=new FileReader;Me.onloadend=()=>{Je(Me.result)},Me.readAsDataURL(H)}},e[13]=l,e[14]=q):q=e[14];const Be=q;let Q;e[15]!==s.categories||e[16]!==l?(Q=function(o){l("categories",s.categories.includes(o)?s.categories.filter(H=>H!==o):[...s.categories,o])},e[15]=s.categories,e[16]=l,e[17]=Q):Q=e[17];const J=Q,De=s.status==="published";let V;e[18]!==n?(V=Object.keys(n),e[18]=n,e[19]=V):V=e[19];const Re=V.length>0;let Y;e[20]===Symbol.for("react.memo_cache_sentinel")?(Y={draft:"bg-slate-100 text-slate-700",scheduled:"bg-amber-100 text-amber-700",published:"bg-green-100 text-green-700"},e[20]=Y):Y=e[20];const Te=Y;let Z;e[21]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(Xe,{title:"Edit Berita"}),e[21]=Z):Z=e[21];let ee;e[22]===Symbol.for("react.memo_cache_sentinel")?(ee=Oe("admin.news.index"),e[22]=ee):ee=e[22];let te;e[23]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsxs(He,{href:ee,className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-4 font-semibold transition",children:[t.jsx(Ae,{className:"h-4 w-4"}),"Kembali"]}),e[23]=te):te=e[23];let se;e[24]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-extrabold text-slate-900",children:"‚úèÔ∏è Edit Berita"}),t.jsx("p",{className:"text-slate-600 mt-2",children:"Perbarui konten dan kelola publikasi"})]}),e[24]=se):se=e[24];const Fe=`px-4 py-2 rounded-lg font-semibold ${Te[s.status]}`,Ke=s.status==="draft"&&"üìã Draft",Ge=s.status==="scheduled"&&"‚è∞ Terjadwal",Le=s.status==="published"&&"üöÄ Published";let c;e[25]!==Fe||e[26]!==Ke||e[27]!==Ge||e[28]!==Le?(c=t.jsxs("div",{className:"mb-8",children:[te,t.jsxs("div",{className:"flex items-center justify-between",children:[se,t.jsxs("div",{className:Fe,children:[Ke,Ge,Le]})]})]}),e[25]=Fe,e[26]=Ke,e[27]=Ge,e[28]=Le,e[29]=c):c=e[29];let d;e[30]!==n||e[31]!==Re?(d=Re&&t.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-lg p-4",children:[t.jsx("p",{className:"text-red-800 font-semibold mb-2",children:"‚ö†Ô∏è Perbaiki error berikut:"}),t.jsx("ul",{className:"text-red-700 text-sm space-y-1",children:Object.entries(n).map(et)})]}),e[30]=n,e[31]=Re,e[32]=d):d=e[32];let m;e[33]!==s.organization_id||e[34]!==n||e[35]!==l?(m=organizations&&organizations.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[t.jsx("label",{className:"block font-semibold text-slate-900",children:"üè¢ Scope Organisasi"}),t.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Pilih organisasi pemilik berita ini. Kosongkan untuk berita Global/Publik."}),t.jsxs("select",{value:s.organization_id,onChange:a=>l("organization_id",a.target.value),className:"w-full rounded-lg border border-slate-200 px-4 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-100",children:[t.jsx("option",{value:"",children:"-- Global / Publik (PP) --"}),organizations.map(Ze)]}),n.organization_id&&t.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.organization_id})]}),e[33]=s.organization_id,e[34]=n,e[35]=l,e[36]=m):m=e[36];let le;e[37]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx("label",{className:"block font-semibold text-slate-900",children:"‚úçÔ∏è Judul Berita"}),e[37]=le):le=e[37];let u;e[38]!==l?(u=a=>l("title",a.target.value),e[38]=l,e[39]=u):u=e[39];let b;e[40]!==s.title||e[41]!==u?(b=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[le,t.jsx("input",{value:s.title,onChange:u,className:"w-full border border-slate-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e[40]=s.title,e[41]=u,e[42]=b):b=e[42];let ae;e[43]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üìå Ringkasan (Lead)"}),e[43]=ae):ae=e[43];let h;e[44]!==l?(h=a=>l("excerpt",a.target.value),e[44]=l,e[45]=h):h=e[45];let x;e[46]!==s.excerpt||e[47]!==h?(x=t.jsx("textarea",{value:s.excerpt,onChange:h,placeholder:"Ringkasan singkat berita yang menarik.",rows:3,className:"w-full border border-slate-200 rounded-lg px-4 py-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),e[46]=s.excerpt,e[47]=h,e[48]=x):x=e[48];let ie;e[49]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("p",{className:"text-xs text-slate-500",children:"20-500 karakter"}),e[49]=ie):ie=e[49];let f;e[50]!==x?(f=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[ae,x,ie]}),e[50]=x,e[51]=f):f=e[51];let re;e[52]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üñºÔ∏è Gambar Featured"}),e[52]=re):re=e[52];let p;e[53]!==T||e[54]!==l?(p=T&&t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:T,alt:"Preview",className:"w-full rounded-lg border-2 border-blue-200 max-h-64 object-cover"}),t.jsx("button",{type:"button",onClick:()=>{l("image",null),Je(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition",children:t.jsx(Ae,{className:"h-4 w-4"})})]}),e[53]=T,e[54]=l,e[55]=p):p=e[55];let g;e[56]!==Be?(g=t.jsx("input",{type:"file",accept:"image/*",onChange:Be,className:"hidden",id:"image-upload"}),e[56]=Be,e[57]=g):g=e[57];let oe;e[58]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer block",children:[t.jsx("p",{className:"text-slate-600 font-medium",children:"Klik atau drag gambar baru di sini"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Format: JPG, PNG ‚Ä¢ Min: 600x400px ‚Ä¢ Max: 5MB"})]}),e[58]=oe):oe=e[58];let j;e[59]!==g?(j=t.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-500 transition cursor-pointer",children:[g,oe]}),e[59]=g,e[60]=j):j=e[60];let N;e[61]!==p||e[62]!==j?(N=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[re,p,j]}),e[61]=p,e[62]=j,e[63]=N):N=e[63];let ne;e[64]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx("label",{className:"block font-semibold text-slate-900",children:"üìÑ Konten Berita"}),e[64]=ne):ne=e[64];let v;e[65]!==l?(v=a=>l("content",a),e[65]=l,e[66]=v):v=e[66];let y;e[67]!==s.content||e[68]!==v?(y=t.jsx(qe,{value:s.content,onChange:v}),e[67]=s.content,e[68]=v,e[69]=y):y=e[69];let ce;e[70]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("p",{className:"text-xs text-slate-500",children:"100-50,000 karakter"}),e[70]=ce):ce=e[70];let _;e[71]!==y?(_=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[ne,y,ce]}),e[71]=y,e[72]=_):_=e[72];let w;e[73]!==m||e[74]!==b||e[75]!==f||e[76]!==N||e[77]!==_?(w=t.jsxs("div",{className:"col-span-2 space-y-6",children:[m,b,f,N,_]}),e[73]=m,e[74]=b,e[75]=f,e[76]=N,e[77]=_,e[78]=w):w=e[78];let k;e[79]!==_e||e[80]!==ve||e[81]!==s.user_id||e[82]!==l?(k=_e==="admin"&&t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-3",children:[t.jsx("h3",{className:"font-semibold text-slate-900",children:"üë§ Penulis"}),t.jsxs("select",{value:s.user_id,onChange:a=>l("user_id",a.target.value),className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Pilih Penulis"}),ve.map(Ye)]})]}),e[79]=_e,e[80]=ve,e[81]=s.user_id,e[82]=l,e[83]=k):k=e[83];let de;e[84]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("h3",{className:"font-semibold text-slate-900",children:"üè∑Ô∏è Kategori"}),e[84]=de):de=e[84];let S;if(e[85]!==ye||e[86]!==s.categories||e[87]!==J){let a;e[89]!==s.categories||e[90]!==J?(a=o=>t.jsxs("label",{className:"flex items-center p-3 border border-slate-200 rounded-lg hover:bg-blue-50 cursor-pointer transition",children:[t.jsx("input",{type:"checkbox",checked:s.categories.includes(o.id),onChange:()=>J(o.id),className:"rounded w-4 h-4 text-blue-600"}),t.jsx("span",{className:"ml-3 font-medium text-slate-700",children:o.name})]},o.id),e[89]=s.categories,e[90]=J,e[91]=a):a=e[91],S=ye.map(a),e[85]=ye,e[86]=s.categories,e[87]=J,e[88]=S}else S=e[88];let P;e[92]!==S?(P=t.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:S}),e[92]=S,e[93]=P):P=e[93];let me;e[94]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("p",{className:"text-xs text-slate-500",children:"Pilih 1-3 kategori yang relevan"}),e[94]=me):me=e[94];let C;e[95]!==P?(C=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[de,P,me]}),e[95]=P,e[96]=C):C=e[96];let ue;e[97]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("h3",{className:"font-semibold text-slate-900",children:"‚öôÔ∏è Status Publikasi"}),e[97]=ue):ue=e[97];let be;e[98]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Status"}),e[98]=be):be=e[98];let z;e[99]!==l?(z=a=>l("status",a.target.value),e[99]=l,e[100]=z):z=e[100];let he,xe,fe;e[101]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("option",{value:"draft",children:"üìã Draft"}),xe=t.jsx("option",{value:"scheduled",children:"‚è∞ Jadwalkan"}),fe=t.jsx("option",{value:"published",children:"üöÄ Publish"}),e[101]=he,e[102]=xe,e[103]=fe):(he=e[101],xe=e[102],fe=e[103]);let E;e[104]!==s.status||e[105]!==z?(E=t.jsxs("div",{className:"space-y-2",children:[be,t.jsxs("select",{value:s.status,onChange:z,className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[he,xe,fe]})]}),e[104]=s.status,e[105]=z,e[106]=E):E=e[106];let B;e[107]!==s.published_at||e[108]!==De||e[109]!==l?(B=De&&t.jsxs("div",{className:"space-y-2 pt-3 border-t border-slate-200",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Waktu Publikasi"}),t.jsx("input",{type:"datetime-local",value:s.published_at,onChange:a=>l("published_at",a.target.value),className:"w-full border border-slate-200 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Kosongi untuk publish sekarang"})]}),e[107]=s.published_at,e[108]=De,e[109]=l,e[110]=B):B=e[110];let D;e[111]!==s.status?(D=s.status==="draft"&&t.jsxs("p",{className:"text-blue-800",children:[t.jsx("span",{className:"font-semibold",children:"üìã Draft:"})," Berita disimpan tapi belum dipublikasikan"]}),e[111]=s.status,e[112]=D):D=e[112];let R;e[113]!==s.status?(R=s.status==="scheduled"&&t.jsxs("p",{className:"text-blue-800",children:[t.jsx("span",{className:"font-semibold",children:"‚è∞ Terjadwal:"})," Otomatis publish pada waktu ditentukan"]}),e[113]=s.status,e[114]=R):R=e[114];let F;e[115]!==s.status?(F=s.status==="published"&&t.jsxs("p",{className:"text-blue-800",children:[t.jsx("span",{className:"font-semibold",children:"üöÄ Published:"})," Berita terlihat di portal"]}),e[115]=s.status,e[116]=F):F=e[116];let K;e[117]!==D||e[118]!==R||e[119]!==F?(K=t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm",children:[D,R,F]}),e[117]=D,e[118]=R,e[119]=F,e[120]=K):K=e[120];let G;e[121]!==E||e[122]!==B||e[123]!==K?(G=t.jsxs("div",{className:"bg-white rounded-xl shadow p-6 space-y-4",children:[ue,E,B,K]}),e[121]=E,e[122]=B,e[123]=K,e[124]=G):G=e[124];let pe;e[125]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(Ve,{className:"h-5 w-5"}),e[125]=pe):pe=e[125];const Ie=W?"‚è≥ Memproses...":s.status==="draft"?"üíæ Simpan Draft":"üöÄ Publish Sekarang";let L;e[126]!==W||e[127]!==Ie?(L=t.jsxs("button",{disabled:W,type:"submit",className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-6 py-3.5 rounded-lg font-bold hover:from-emerald-600 hover:to-teal-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:[pe,Ie]}),e[126]=W,e[127]=Ie,e[128]=L):L=e[128];let ge;e[129]===Symbol.for("react.memo_cache_sentinel")?(ge=Oe("admin.news.index"),e[129]=ge):ge=e[129];let je;e[130]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsxs(He,{href:ge,className:"w-full flex items-center justify-center gap-2 px-6 py-3 border-2 border-slate-300 text-slate-700 rounded-lg font-semibold hover:bg-slate-100 hover:border-slate-400 transition-all active:scale-95",children:[t.jsx(Ae,{className:"h-5 w-5"}),"Batal"]}),e[130]=je):je=e[130];let I;e[131]!==L?(I=t.jsxs("div",{className:"space-y-3 sticky bottom-4 bg-white/95 backdrop-blur rounded-xl p-4 border border-slate-200 shadow-lg",children:[L,je]}),e[131]=L,e[132]=I):I=e[132];let M;e[133]!==k||e[134]!==C||e[135]!==G||e[136]!==I?(M=t.jsxs("div",{className:"col-span-1 space-y-4",children:[k,C,G,I]}),e[133]=k,e[134]=C,e[135]=G,e[136]=I,e[137]=M):M=e[137];let O;e[138]!==w||e[139]!==M?(O=t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[w,M]}),e[138]=w,e[139]=M,e[140]=O):O=e[140];let A;e[141]!==Ee||e[142]!==d||e[143]!==O?(A=t.jsxs("form",{onSubmit:Ee,className:"space-y-6",children:[d,O]}),e[141]=Ee,e[142]=d,e[143]=O,e[144]=A):A=e[144];let Ne;return e[145]!==c||e[146]!==A?(Ne=t.jsxs(Qe,{children:[Z,t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50/20 to-white py-8 px-4",children:t.jsxs("div",{className:"max-w-5xl mx-auto",children:[c,A]})})]}),e[145]=c,e[146]=A,e[147]=Ne):Ne=e[147],Ne}function Ye(r){return t.jsxs("option",{value:r.id,children:[r.name," (",r.role,")"]},r.id)}function Ze(r){return t.jsxs("option",{value:r.id,children:[r.name," (",r.type.toUpperCase(),")"]},r.id)}function et(r){const[e,i]=r;return t.jsxs("li",{children:["‚Ä¢ ",e,": ",i]},e)}function tt(r){return parseInt(r)}export{jt as default};

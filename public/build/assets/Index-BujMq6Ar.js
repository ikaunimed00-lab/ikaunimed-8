import{c as te,u as se,r as F,j as t,a as G,H as le,L as re}from"./app-KlfsiMNf.js";import{A as ae}from"./AdminLayout-C3haD2Gb.js";import{c as ie}from"./createLucideIcon-2FLWy-_U.js";import{A as ne}from"./arrow-left-BWiVmb5Q.js";import{U as oe}from"./users-C4VZ7fLL.js";import{M as ce}from"./mail-lOzcOe28.js";import{T as de}from"./trash-2-Bz097UY3.js";/* empty css            */import"./index-BsxvijQw.js";import"./sidebar-menu-config-D9XkqpsO.js";import"./house-XsxodZLj.js";import"./newspaper-B5rCS7VE.js";import"./graduation-cap-1kygk_cR.js";import"./handshake-DB0pupHl.js";import"./user-DcBh4x77.js";const me=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],he=ie("Trash",me);function He(n){const e=te.c(59),{users:r}=n,{flash:i,auth:O}=se().props;let y;e[0]===Symbol.for("react.memo_cache_sentinel")?(y=[],e[0]=y):y=e[0];const[s,w]=F.useState(y),[V,z]=F.useState(!1),[v,J]=F.useState(null);e:switch(O.user.role){case"admin":{route("dashboard.admin");break e}case"editor":{route("dashboard.editor");break e}case"writer":{route("dashboard.writer");break e}case"subscriber":{route("dashboard.subscriber");break e}default:route("home")}let k;e[1]===Symbol.for("react.memo_cache_sentinel")?(k=a=>{w(l=>l.includes(a)?l.filter($=>$!==a):[...l,a])},e[1]=k):k=e[1];const Q=k;let _;e[2]!==s.length||e[3]!==r?(_=()=>{s.length===r.length?w([]):w(r.map(pe))},e[2]=s.length,e[3]=r,e[4]=_):_=e[4];const B=_;let S;e[5]===Symbol.for("react.memo_cache_sentinel")?(S=a=>{J(a),z(!0)},e[5]=S):S=e[5];const X=S;let C;e[6]!==v?(C=()=>{v&&G.delete(route("admin.users.destroy",v),{onSuccess:()=>{z(!1),J(null)}})},e[6]=v,e[7]=C):C=e[7];const P=C;let A;e[8]!==s?(A=()=>{s.length!==0&&window.confirm(`Hapus ${s.length} user? Tindakan ini tidak bisa dibatalkan.`)&&G.post(route("admin.users.bulk-delete"),{ids:s},{onSuccess:()=>w([])})},e[8]=s,e[9]=A):A=e[9];const W=A,Y=ue,Z=xe;let T;e[10]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(le,{title:"Kelola User"}),e[10]=T):T=e[10];let U;e[11]===Symbol.for("react.memo_cache_sentinel")?(U=route("dashboard.admin"),e[11]=U):U=e[11];let H;e[12]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsxs(re,{href:U,className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-semibold transition-colors mb-4 group",children:[t.jsx("div",{className:"p-2 bg-white rounded-full shadow-sm group-hover:shadow-md transition-all",children:t.jsx(ne,{className:"h-4 w-4"})}),"Kembali ke Dashboard"]}),e[12]=H):H=e[12];let D;e[13]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsxs("div",{className:"mb-10",children:[H,t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-lg",children:t.jsx(oe,{className:"w-6 h-6 text-white"})}),t.jsx("h1",{className:"text-4xl font-extrabold text-slate-900",children:"Kelola User"})]}),t.jsx("p",{className:"text-slate-600 ml-16",children:"Manage users dan kontrol role setiap pengguna sistem"})]}),e[13]=D):D=e[13];let o;e[14]!==i?(o=i?.success&&t.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-300 rounded-lg",children:t.jsxs("p",{className:"text-green-800 font-semibold",children:["✓ ",i.success]})}),e[14]=i,e[15]=o):o=e[15];let c;e[16]!==i?(c=i?.error&&t.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-300 rounded-lg",children:t.jsxs("p",{className:"text-red-800 font-semibold",children:["✗ ",i.error]})}),e[16]=i,e[17]=c):c=e[17];let I;e[18]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("p",{className:"text-slate-600 text-sm font-semibold uppercase",children:"Total User"}),e[18]=I):I=e[18];let d;e[19]!==r.length?(d=t.jsxs("div",{children:[I,t.jsx("p",{className:"text-3xl font-bold text-slate-900",children:r.length})]}),e[19]=r.length,e[20]=d):d=e[20];let m;e[21]!==W||e[22]!==s.length?(m=s.length>0&&t.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:[t.jsx(he,{className:"w-4 h-4"}),"Hapus ",s.length," User"]}),e[21]=W,e[22]=s.length,e[23]=m):m=e[23];let h;e[24]!==d||e[25]!==m?(h=t.jsxs("div",{className:"bg-slate-50 px-8 py-6 border-b flex justify-between items-center",children:[d,m]}),e[24]=d,e[25]=m,e[26]=h):h=e[26];const q=s.length===r.length&&r.length>0;let x;e[27]!==q||e[28]!==B?(x=t.jsx("th",{className:"px-6 py-4",children:t.jsx("input",{type:"checkbox",checked:q,onChange:B})}),e[27]=q,e[28]=B,e[29]=x):x=e[29];let M,E,L,R;e[30]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("th",{className:"px-6 py-4 text-left",children:"Nama"}),E=t.jsx("th",{className:"px-6 py-4 text-left",children:"Email"}),L=t.jsx("th",{className:"px-6 py-4 text-center",children:"Role"}),R=t.jsx("th",{className:"px-6 py-4 text-center",children:"Aksi"}),e[30]=M,e[31]=E,e[32]=L,e[33]=R):(M=e[30],E=e[31],L=e[32],R=e[33]);let u;e[34]!==x?(u=t.jsx("thead",{className:"bg-slate-100 border-b",children:t.jsxs("tr",{children:[x,M,E,L,R]})}),e[34]=x,e[35]=u):u=e[35];let p;if(e[36]!==s||e[37]!==r){let a;e[39]!==s?(a=l=>{const $=Y(l.role);return t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("input",{type:"checkbox",checked:s.includes(l.id),onChange:()=>Q(l.id)})}),t.jsx("td",{className:"px-6 py-4 font-semibold",children:l.name}),t.jsxs("td",{className:"px-6 py-4 flex items-center gap-2",children:[t.jsx(ce,{className:"w-4 h-4 text-slate-400"}),l.email]}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsxs("select",{value:l.role,onChange:ee=>Z(l.id,ee.target.value),className:`px-3 py-2 rounded ${$.bg} ${$.text}`,children:[t.jsx("option",{value:"subscriber",children:"Subscriber"}),t.jsx("option",{value:"writer",children:"Writer"}),t.jsx("option",{value:"editor",children:"Editor"}),t.jsx("option",{value:"admin",children:"Admin"})]})}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsxs("button",{onClick:()=>X(l.id),className:"text-red-600 hover:underline flex items-center gap-1 justify-center",children:[t.jsx(de,{className:"w-4 h-4"}),"Hapus"]})})]},l.id)},e[39]=s,e[40]=a):a=e[40],p=r.map(a),e[36]=s,e[37]=r,e[38]=p}else p=e[38];let f;e[41]!==p?(f=t.jsx("tbody",{className:"divide-y",children:p}),e[41]=p,e[42]=f):f=e[42];let b;e[43]!==u||e[44]!==f?(b=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[u,f]})}),e[43]=u,e[44]=f,e[45]=b):b=e[45];let g;e[46]!==h||e[47]!==b?(g=t.jsxs("div",{className:"rounded-2xl border border-slate-200 shadow-lg overflow-hidden bg-white",children:[h,b]}),e[46]=h,e[47]=b,e[48]=g):g=e[48];let j;e[49]!==o||e[50]!==c||e[51]!==g?(j=t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-50 to-blue-50 py-8 px-4 md:px-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[D,o,c,g]})}),e[49]=o,e[50]=c,e[51]=g,e[52]=j):j=e[52];let N;e[53]!==P||e[54]!==V?(N=V&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-bold mb-4",children:"Konfirmasi Hapus"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Apakah Anda yakin ingin menghapus user ini? Tindakan ini tidak bisa dibatalkan."}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>z(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium",children:"Batal"}),t.jsx("button",{onClick:P,className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg font-medium",children:"Hapus"})]})]})}),e[53]=P,e[54]=V,e[55]=N):N=e[55];let K;return e[56]!==j||e[57]!==N?(K=t.jsxs(ae,{children:[T,j,N]}),e[56]=j,e[57]=N,e[58]=K):K=e[58],K}function xe(n,e){G.put(route("admin.users.update",n),{role:e},{preserveScroll:!0})}function ue(n){switch(n){case"admin":return{bg:"bg-red-100",text:"text-red-700"};case"editor":return{bg:"bg-blue-100",text:"text-blue-700"};case"writer":return{bg:"bg-green-100",text:"text-green-700"};default:return{bg:"bg-slate-100",text:"text-slate-700"}}}function pe(n){return n.id}export{He as default};
